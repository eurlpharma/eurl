import{F as O,G as U,u as Z,ak as H,r as h,N as M,j as e,C as Q,a2 as J,T as o,ai as K,U as u,P as i,I as T,am as V,a9 as p,a8 as x,Q as X,aj as Y,a1 as _,B as ee,an as ae}from"./index-d1e9d783.js";import{c as se,a as n,b as re,d as te,u as oe,o as ie}from"./index.esm-590aa197.js";import{I as S}from"./InputAdornment-06a64392.js";import{E as q}from"./EyeSlashIcon-80eca774.js";import{E as C}from"./EyeIcon-1bf2a3b0.js";import{C as ne}from"./Checkbox-e8c76dad.js";const xe=()=>{var g,v,b,N,y;const{t:a}=O(),$=U(),w=Z(),A=H(),[d,I]=h.useState(!1),[l,E]=h.useState(!1),{loading:r,error:f,isAuthenticated:j}=M(m=>m.auth),c=new URLSearchParams(A.search).get("redirect")||"/";h.useEffect(()=>{j&&w(c)},[j,w,c]);const W=se().shape({firstName:n().required(a("validation.required")),lastName:n().required(a("validation.required")),email:n().email(a("validation.invalidEmail")).required(a("validation.required")),password:n().required(a("validation.required")).min(8,a("validation.passwordLength")).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,a("validation.passwordRequirements")),confirmPassword:n().oneOf([re("password")],a("validation.passwordsMatch")).required(a("validation.required")),acceptTerms:te().oneOf([!0],a("validation.acceptTerms")).required(a("validation.required"))}),{register:t,handleSubmit:k,formState:{errors:s}}=oe({resolver:ie(W)}),L=async m=>{try{const{firstName:P,lastName:F,email:R,password:z}=m,G={name:`${P} ${F}`,email:R,password:z};await $(ae(G)).unwrap()}catch{}},B=()=>{I(!d)},D=()=>{E(!l)};return e.jsx(Q,{maxWidth:"md",className:"py-12",children:e.jsxs(J,{elevation:3,className:"p-8",children:[e.jsx(o,{variant:"h4",component:"h1",className:"text-center mb-6 font-bold",children:a("auth.createAccount")}),f&&e.jsx(K,{severity:"error",className:"mb-4",children:f}),e.jsxs("form",{onSubmit:k(L),className:"space-y-4",children:[e.jsxs(u,{container:!0,spacing:2,children:[e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(i,{label:a("auth.firstName"),fullWidth:!0,...t("firstName"),error:!!s.firstName,helperText:(g=s.firstName)==null?void 0:g.message,disabled:r})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(i,{label:a("auth.lastName"),fullWidth:!0,...t("lastName"),error:!!s.lastName,helperText:(v=s.lastName)==null?void 0:v.message,disabled:r})})]}),e.jsx(i,{label:a("auth.email"),type:"email",fullWidth:!0,...t("email"),error:!!s.email,helperText:(b=s.email)==null?void 0:b.message,disabled:r}),e.jsx(i,{label:a("auth.password"),type:d?"text":"password",fullWidth:!0,...t("password"),error:!!s.password,helperText:(N=s.password)==null?void 0:N.message,disabled:r,InputProps:{endAdornment:e.jsx(S,{position:"end",children:e.jsx(T,{onClick:B,edge:"end","aria-label":d?"hide password":"show password",children:d?e.jsx(q,{className:"w-5 h-5"}):e.jsx(C,{className:"w-5 h-5"})})})}}),e.jsx(i,{label:a("auth.confirmPassword"),type:l?"text":"password",fullWidth:!0,...t("confirmPassword"),error:!!s.confirmPassword,helperText:(y=s.confirmPassword)==null?void 0:y.message,disabled:r,InputProps:{endAdornment:e.jsx(S,{position:"end",children:e.jsx(T,{onClick:D,edge:"end","aria-label":l?"hide password":"show password",children:l?e.jsx(q,{className:"w-5 h-5"}):e.jsx(C,{className:"w-5 h-5"})})})}}),e.jsx(V,{control:e.jsx(ne,{...t("acceptTerms"),color:"primary",disabled:r}),label:e.jsxs(o,{variant:"body2",children:[a("auth.agreeToTerms")," ",e.jsx(p,{component:x,to:"/terms",underline:"hover",children:a("auth.termsAndConditions")})," ",a("auth.and")," ",e.jsx(p,{component:x,to:"/privacy",underline:"hover",children:a("auth.privacyPolicy")})]})}),s.acceptTerms&&e.jsx(o,{variant:"caption",color:"error",children:s.acceptTerms.message}),e.jsx(X,{fullWidth:!0,type:"submit",radius:"none",isDisabled:r,startContent:r&&e.jsx(Y,{size:20,color:"inherit"}),children:a(r?"common.loading":"auth.login")})]}),e.jsx(_,{className:"my-6",children:e.jsx(o,{variant:"body2",color:"textSecondary",children:a("auth.or")})}),e.jsx(ee,{className:"text-center",children:e.jsxs(o,{variant:"body2",children:[a("auth.alreadyHaveAccount")," ",e.jsx(p,{component:x,to:`/auth/login${c!=="/"?`?redirect=${c}`:""}`,underline:"hover",children:a("auth.login")})]})})]})})};export{xe as default};
