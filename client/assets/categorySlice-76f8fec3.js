import{bj as n,aZ as d,bl as p}from"./index-d1e9d783.js";const u={categories:[],loading:!1,error:null},i=n("categories/getCategories",async(o,{rejectWithValue:e})=>{var a,t;try{const r=localStorage.getItem("token");return(await d.get("/api/categories",{baseURL:"https://eurl-server.onrender.com",withCredentials:!0,headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}})).data.categories}catch(r){return e(((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to fetch categories")}}),f=n("categories/getCategoryById",async(o,{rejectWithValue:e})=>{var a,t;try{return(await d.get(`/api/categories/${o}`)).data}catch(r){const s=((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||r.message||"Failed to fetch category";return e(s)}}),c=n("categories/createCategory",async(o,{rejectWithValue:e})=>{var a,t;try{const r=localStorage.getItem("token");return(await d.post("/api/categories",o,{baseURL:"https://eurl-server.onrender.com",withCredentials:!0,headers:{Authorization:`Bearer ${r}`}})).data.category}catch(r){return e(((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to create category")}}),l=n("categories/updateCategory",async({id:o,categoryData:e},{rejectWithValue:a})=>{var t,r;try{const s=localStorage.getItem("token");return(await d.put(`/api/categories/${o}`,e,{baseURL:"https://eurl-server.onrender.com",withCredentials:!0,headers:{Authorization:`Bearer ${s}`}})).data.category}catch(s){return a(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to update category")}}),g=n("categories/deleteCategory",async(o,{rejectWithValue:e})=>{var a,t;try{const r=localStorage.getItem("token");return await d.delete(`/api/categories/${o}`,{baseURL:"https://eurl-server.onrender.com",withCredentials:!0,headers:{Authorization:`Bearer ${r}`}}),{id:o}}catch(r){return e(((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to delete category")}}),y=p({name:"categories",initialState:u,reducers:{},extraReducers:o=>{o.addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.loading=!1,e.categories=a.payload}).addCase(i.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,a)=>{e.loading=!1,e.categories.push(a.payload)}).addCase(c.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,a)=>{e.loading=!1;const t=e.categories.findIndex(r=>r.id===a.payload.id);t!==-1&&(e.categories[t]=a.payload)}).addCase(l.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(g.pending,e=>{e.loading=!0,e.error=null}).addCase(g.fulfilled,(e,a)=>{e.loading=!1,e.categories=e.categories.filter(t=>t.id!==a.payload.id)}).addCase(g.rejected,(e,a)=>{e.loading=!1,e.error=a.payload})}}),m=y.reducer;export{c as createCategory,m as default,g as deleteCategory,i as getCategories,f as getCategoryById,l as updateCategory};
