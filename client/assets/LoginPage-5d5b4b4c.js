import{F as T,G as A,u as k,ak as C,r as x,N as L,j as e,C as $,a2 as q,T as c,ai as B,P as j,I as W,B as f,a9 as w,a8 as g,Q as D,aj as F,a1 as z,al as R}from"./index-d1e9d783.js";import{c as G,a as y,u as Q,o as U}from"./index.esm-590aa197.js";import{I as H}from"./InputAdornment-06a64392.js";import{E as J}from"./EyeSlashIcon-80eca774.js";import{E as K}from"./EyeIcon-1bf2a3b0.js";const _=()=>{var u,p;const{t:s}=T(),v=A(),i=k(),b=C(),[t,N]=x.useState(!1),{loading:a,error:d,isAuthenticated:h}=L(n=>n.auth),r=new URLSearchParams(b.search).get("redirect")||"/";x.useEffect(()=>{h&&i(r)},[h,i,r]);const P=G().shape({email:y().email(s("validation.invalidEmail")).required(s("validation.required")),password:y().required(s("validation.required"))}),{register:m,handleSubmit:S,formState:{errors:o}}=Q({resolver:U(P)}),E=async n=>{try{const l=await v(R(n)).unwrap();l&&l.token&&setTimeout(()=>{i(r)},100)}catch{}},I=()=>{N(!t)};return e.jsx($,{maxWidth:"sm",className:"py-12 pt-24",children:e.jsxs(q,{elevation:3,className:"p-8 rounded-none shadow-sm",children:[e.jsx(c,{variant:"h4",component:"h1",className:"text-center mb-6 font-semibold font-josefin capitalize",children:"login account"}),d&&e.jsx(B,{severity:"error",className:"mb-4",children:d}),e.jsxs("form",{onSubmit:S(E),className:"space-y-4",children:[e.jsx(j,{label:s("auth.email"),type:"email",fullWidth:!0,...m("email"),error:!!o.email,helperText:(u=o.email)==null?void 0:u.message,disabled:a}),e.jsx(j,{label:s("auth.password"),type:t?"text":"password",fullWidth:!0,...m("password"),error:!!o.password,helperText:(p=o.password)==null?void 0:p.message,disabled:a,InputProps:{endAdornment:e.jsx(H,{position:"end",children:e.jsx(W,{onClick:I,edge:"end","aria-label":t?"hide password":"show password",children:t?e.jsx(J,{className:"w-5 h-5"}):e.jsx(K,{className:"w-5 h-5"})})})}}),e.jsx(f,{className:"flex justify-end",children:e.jsx(w,{component:g,to:"/auth/forgot-password",variant:"body2",underline:"hover",children:s("auth.forgotPassword")})}),e.jsx(D,{fullWidth:!0,type:"submit",radius:"none",variant:"solid",isDisabled:a,startContent:a&&e.jsx(F,{size:20,color:"inherit"}),children:s(a?"common.loading":"auth.login")})]}),e.jsx(z,{className:"my-6",children:e.jsx(c,{variant:"body2",color:"textSecondary",children:s("auth.or")})}),e.jsx(f,{className:"text-center",children:e.jsxs(c,{variant:"body2",children:[s("auth.noAccount")," ",e.jsx(w,{component:g,to:`/auth/register${r!=="/"?`?redirect=${r}`:""}`,underline:"hover",children:s("auth.register")})]})})]})})};export{_ as default};
