import{F as T,G as P,N as v,r as i,j as s,C as w,T as c,ai as S,a2 as D,B as l,aj as E,Z as x,a8 as j}from"./index-d1e9d783.js";import{getUserOrders as O}from"./orderSlice-072923af.js";import{T as _,a as B,b as L,c as p,d as a,e as A}from"./TableRow-af3e354d.js";import{C as F}from"./Chip-d0686d0b.js";import{E as I}from"./EyeIcon-1bf2a3b0.js";import{P as $}from"./Pagination-a3142cf8.js";import"./LastPage-863d5f50.js";const W=()=>{const{t:r}=T(),d=P(),{orders:t,loading:u,error:h,totalOrders:g}=v(e=>e.orders),[n,f]=i.useState(1),[o]=i.useState(10);i.useEffect(()=>{d(O({page:n,limit:o}))},[d,n,o]);const y=(e,N)=>{f(N)},m=Math.ceil(g/o),b=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),C=e=>{switch(e.toLowerCase()){case"pending":return"warning";case"processing":return"info";case"shipped":return"primary";case"delivered":return"success";case"cancelled":return"error";default:return"default"}};return s.jsxs(w,{maxWidth:"lg",className:"py-8",children:[s.jsx(c,{variant:"h4",component:"h1",className:"mb-6 font-bold",children:r("orders.myOrders")}),h&&s.jsx(S,{severity:"error",className:"mb-4",children:h}),s.jsx(D,{className:"p-4",children:u&&t.length===0?s.jsx(l,{className:"flex justify-center py-8",children:s.jsx(E,{})}):t.length===0?s.jsxs(l,{className:"text-center py-8",children:[s.jsx(c,{variant:"h6",className:"mb-4",children:r("orders.noOrders")}),s.jsx(x,{component:j,to:"/products",variant:"contained",color:"primary",children:r("orders.startShopping")})]}):s.jsxs(s.Fragment,{children:[s.jsx(_,{children:s.jsxs(B,{children:[s.jsx(L,{children:s.jsxs(p,{children:[s.jsx(a,{children:r("orders.orderId")}),s.jsx(a,{children:r("orders.date")}),s.jsx(a,{children:r("orders.total")}),s.jsx(a,{children:r("orders.status")}),s.jsx(a,{align:"right",children:r("orders.actions")})]})}),s.jsx(A,{children:t.map(e=>s.jsxs(p,{children:[s.jsx(a,{children:s.jsxs(c,{variant:"body2",className:"font-medium",children:["#",e._id.substring(e._id.length-8)]})}),s.jsx(a,{children:b(e.createdAt)}),s.jsxs(a,{children:["$",e.totalPrice.toFixed(2)," DA"]}),s.jsx(a,{children:s.jsx(F,{label:r(`orders.status.${e.status.toLowerCase()}`),color:C(e.status),size:"small"})}),s.jsx(a,{align:"right",children:s.jsx(x,{component:j,to:`/orders/${e._id}`,startIcon:s.jsx(I,{className:"w-4 h-4"}),size:"small",children:r("orders.view")})})]},e._id))})]})}),m>1&&s.jsx(l,{className:"flex justify-center mt-4",children:s.jsx($,{count:m,page:n,onChange:y,color:"primary"})})]})})]})};export{W as default};
