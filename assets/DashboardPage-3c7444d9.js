import{r as a,F as U,G as M,N as _,j as e,S as W,a7 as G,aO as V,B as o,aP as Z,T as u,Z as w,U as x,a2 as H,H as I,aQ as N,a8 as j,a1 as C,J as E}from"./index-d1e9d783.js";import{getDashboardStats as P}from"./adminSlice-3ab4ab19.js";import{T as $,a as R,b as L,c as g,d as r,e as O}from"./TableRow-af3e354d.js";import{C as D}from"./Chip-d0686d0b.js";function q({title:n,titleId:t,...c},i){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},c),n?a.createElement("title",{id:t},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const z=a.forwardRef(q),Q=z;function J({title:n,titleId:t,...c},i){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},c),n?a.createElement("title",{id:t},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const K=a.forwardRef(J),X=K;function Y({title:n,titleId:t,...c},i){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},c),n?a.createElement("title",{id:t},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ee=a.forwardRef(Y),se=ee;function ne({title:n,titleId:t,...c},i){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},c),n?a.createElement("title",{id:t},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const re=a.forwardRef(ne),ae=re,T={info:"#18181b",warning:"#f5a524",success:"#17c964",danger:"#f31260",secondary:"#9353d3",primary:"#006FEE"},de=()=>{var b,y;const{t:n}=U(),t=M(),{dashboardStats:c,recentProducts:i,recentOrders:p,loading:A,error:B}=_(s=>s.admin);a.useEffect(()=>{t(P())},[t]);const d=c||{totalSales:0,totalOrders:0,totalProducts:0,totalUsers:0,percentageChange:{sales:0,orders:0,products:0,users:0},recentProducts:[],recentOrders:[]},F=[{title:n("admin.totalSales"),value:d.totalRevenue||0,change:((b=d.percentageChange)==null?void 0:b.sales)||0,icon:e.jsx(se,{className:"w-8 h-8"}),color:"primary"},{title:n("admin.totalOrders"),value:d.totalOrders||0,change:((y=d.percentageChange)==null?void 0:y.orders)||0,icon:e.jsx(W,{className:"w-8 h-8"}),color:"info"},{title:n("admin.totalProducts"),value:d.totalProducts||0,change:0,icon:e.jsx(G,{className:"w-8 h-8"}),color:"success"},{title:n("admin.totalUsers"),value:d.totalUsers||0,change:0,icon:e.jsx(V,{className:"w-8 h-8"}),color:"warning"}];return A?e.jsx(o,{className:"flex items-center justify-center h-full",children:e.jsx(Z,{})}):B?e.jsxs(o,{className:"flex flex-col items-center justify-center h-full p-6",children:[e.jsx(u,{variant:"h6",color:"error",className:"mb-4",children:n("common.errorOccurred")}),e.jsx(w,{variant:"contained",color:"primary",onClick:()=>{t(P())},children:n("common.tryAgain")})]}):e.jsxs(o,{className:"p-6",children:[e.jsx(u,{variant:"h4",component:"h1",className:"mb-6 font-semibold font-josefin",children:n("admin.dashboard")}),e.jsx(x,{container:!0,spacing:3,className:"mb-6",children:F.map((s,h)=>{const m=T[s.color]||"bg-gray-400";return e.jsx(x,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(H,{className:"p-4 h-full",children:[e.jsxs(o,{className:"flex items-center mb-2",children:[e.jsx(o,{style:{backgroundColor:m},className:`p-2 rounded-full ${T[s.color]} mr-3 text-girl-white`,children:s.icon}),e.jsx(u,{variant:"h6",component:"h2",children:s.title})]}),e.jsx(u,{variant:"h4",component:"p",className:"mb-1 font-bold",children:s.title===n("admin.totalSales")?`${s.value.toLocaleString()} دج`:s.value.toLocaleString()}),s.change!==void 0&&e.jsxs(o,{className:"flex items-center",children:[s.change>=0?e.jsx(X,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(Q,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs(u,{variant:"caption",color:s.change>=0?"success":"error",children:[Math.abs(s.change),"% ",n("admin.vsPreviousPeriod")]})]})]})},h)})}),e.jsx(x,{container:!0,spacing:3,className:"mb-6",children:e.jsx(x,{item:!0,xs:12,children:e.jsxs(I,{children:[e.jsx(N,{title:n("admin.recentProducts"),action:e.jsx(w,{component:j,to:"/admin/products",color:"primary",children:n("common.viewAll")})}),e.jsx(C,{}),e.jsx(E,{children:e.jsx($,{children:e.jsxs(R,{children:[e.jsx(L,{children:e.jsxs(g,{children:[e.jsx(r,{children:n("admin.productImage")}),e.jsx(r,{children:n("admin.productName")}),e.jsx(r,{children:n("admin.category")}),e.jsx(r,{align:"right",children:n("admin.price")}),e.jsx(r,{align:"right",children:n("admin.stock")}),e.jsx(r,{align:"center",children:n("admin.status")})]})}),e.jsx(O,{children:i&&i.length>0?i.map(s=>{var h;return e.jsxs(g,{children:[e.jsx(r,{children:e.jsx(o,{className:"w-12 h-12 relative",children:s.images&&s.images.length>0?e.jsx("img",{src:s.images[0].startsWith("http")?s.images[0]:`${{}.VITE_API_URL}/uploads/${s.images[0]}`,alt:s.name,className:"w-full h-full object-cover rounded"}):e.jsx(o,{className:"w-full h-full bg-gray-200 rounded flex items-center justify-center",children:e.jsx(ae,{className:"w-6 h-6 text-gray-400"})})})}),e.jsx(r,{children:e.jsx(j,{to:`/admin/products/edit/${s.id}`,className:"text-primary-600 hover:underline",children:s.name})}),e.jsx(r,{children:typeof s.category=="string"?s.category:(h=s.category)==null?void 0:h.name}),e.jsxs(r,{align:"right",children:["$",s.price]}),e.jsx(r,{align:"right",children:s.countInStock}),e.jsx(r,{align:"center",children:e.jsx(D,{label:s.countInStock===0?n("products.outOfStock"):s.countInStock<10?n("products.lowStock"):n("products.inStock"),color:s.countInStock===0?"error":s.countInStock<10?"warning":"success",size:"small"})})]},s.id)}):e.jsx(g,{children:e.jsx(r,{colSpan:5,align:"center",children:n("products.noProductsFound")})})})]})})})]})})}),e.jsx(x,{container:!0,spacing:3,children:e.jsx(x,{item:!0,xs:12,children:e.jsxs(I,{children:[e.jsx(N,{title:n("admin.recentOrders"),action:e.jsx(w,{component:j,to:"/admin/orders",color:"primary",children:n("common.viewAll")})}),e.jsx(C,{}),e.jsx(E,{children:e.jsx($,{children:e.jsxs(R,{children:[e.jsx(L,{children:e.jsxs(g,{children:[e.jsx(r,{children:n("admin.orderId")}),e.jsx(r,{children:n("admin.customer")}),e.jsx(r,{children:n("admin.date")}),e.jsx(r,{align:"right",children:n("admin.total")}),e.jsx(r,{children:n("admin.products")||"Products"}),e.jsx(r,{children:n("admin.quantity")||"Quantity"}),e.jsx(r,{align:"center",children:n("admin.status")})]})}),e.jsx(O,{children:p&&p.length>0?p.map((s,h)=>{var m,v,k,S;return e.jsxs(g,{children:[e.jsx(r,{children:e.jsxs(j,{to:`/admin/orders/${s.id??s._id}`,className:"text-primary-600 hover:underline",children:["#",((v=(m=s.id??s._id)==null?void 0:m.slice)==null?void 0:v.call(m,-6))??""]})}),e.jsx(r,{children:typeof s.user=="string"?"Guest":((k=s.user)==null?void 0:k.name)||((S=s.guestInfo)==null?void 0:S.name)||"Guest"}),e.jsx(r,{children:new Date(s.createdAt).toLocaleDateString()}),e.jsxs(r,{align:"right",children:["$",s.totalPrice]}),e.jsx(r,{children:s.orderItems&&s.orderItems.length>0?e.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:s.orderItems.map((l,f)=>e.jsxs("li",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:2},children:[l.product&&l.product.images&&l.product.images.length>0?e.jsx("img",{src:l.product.images[0].startsWith("http")?l.product.images[0]:`${{}.VITE_API_URL}/uploads/${l.product.images[0]}`,alt:l.name,style:{width:28,height:28,objectFit:"cover",borderRadius:4,marginRight:4}}):e.jsx("span",{style:{width:28,height:28,display:"inline-block",background:"#eee",borderRadius:4,marginRight:4}}),e.jsx("span",{children:l.name})]},f))}):e.jsx("span",{children:"-"})}),e.jsx(r,{children:s.orderItems&&s.orderItems.length>0?e.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:s.orderItems.map((l,f)=>e.jsx("li",{children:e.jsx("p",{children:l.qty})},f))}):e.jsx("span",{children:"-"})}),e.jsx(r,{align:"center",children:e.jsx(D,{label:n(`admin.${String(s.status).toLowerCase()}`),color:s.status==="delivered"?"success":s.status==="processing"?"primary":s.status==="cancelled"?"error":"warning",size:"small"})})]},s.id??s._id??h)}):e.jsx(g,{children:e.jsx(r,{colSpan:7,align:"center",children:n("orders.noOrdersFound")})})})]})})})]})})})]})};export{de as default};
