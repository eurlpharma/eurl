import{F as T,G as q,u as D,N as W,r as M,j as s,C as f,B as t,a7 as L,T as a,a8 as h,b as p,U as u,a2 as j,Z as E,a1 as b,H as R,a9 as U,I as g,P as z}from"./index-d1e9d783.js";import{updateCartQuantity as G,removeFromCart as Q,clearCart as _}from"./cartSlice-0c1f42b2.js";import{B as N}from"./Breadcrumb-15b3a31b.js";import{A as v}from"./ArrowLeftIcon-01948865.js";import{T as w}from"./TrashIcon-f581e95b.js";import{C as H}from"./CardMedia-d26a9396.js";import{M as Z}from"./MinusIcon-e9fb97cc.js";import{P as J}from"./PlusIcon-436a5931.js";import"./FloatingLeaf-437cd19f.js";const as=()=>{const{t:r}=T(),d=q(),C=D(),l=W(e=>e.cart),n=(l==null?void 0:l.items)||[],{loading:y}=l,[k]=M.useState(0),i="/api",I=(e,c)=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/")?`${i}${e}`:e.includes("/")?`${i}${e.startsWith("/")?"":"/"}${e}`:c?`${i}/uploads/products/${c}/${e}`:`${i}/images/products/${e}`:"/images/product-placeholder.svg",m=(e,c)=>{c<1||d(G({id:e,quantity:c}))},$=e=>{d(Q(e))},S=()=>{d(_())},A=()=>{C("/checkout")},o=n&&n.length>0?n.reduce((e,c)=>e+c.price*c.quantity,0):0,B=o*k/100,x=o>100?0:10,F=o-B+x;return!y&&(!n||n.length===0)?s.jsxs("div",{className:"bg-girl-white",children:[s.jsx(N,{pageName:"Shopping Cart"}),s.jsx(f,{maxWidth:"lg",className:"py-12",children:s.jsxs(t,{className:"text-center py-12",children:[s.jsx(L,{className:"w-20 h-20 mx-auto text-gray-400 mb-4"}),s.jsx(a,{variant:"h5",className:"mb-4",children:r("cart.emptyCart")}),s.jsx(a,{variant:"body1",className:"text-gray-600 mb-6",children:r("cart.emptyCartMessage")}),s.jsxs(h,{to:"/products",className:p("text-girl-secondary flex items-center gap-2","border-1 border-solid border-girl-secondary","w-fit px-3 py-2 hover:bg-girl-secondary hover:text-girl-white"),children:[s.jsx(v,{className:"w-5 h-5"}),s.jsx("p",{children:r("cart.continueShopping")})]})]})})]}):s.jsxs("div",{className:"bg-girl-white",children:[s.jsx(N,{pageName:"Shopping Cart"}),s.jsx(f,{maxWidth:"lg",className:"py-8",children:s.jsxs(u,{container:!0,spacing:4,children:[s.jsx(u,{item:!0,xs:12,md:8,children:s.jsxs(j,{className:"p-4 rounded-none shadow-sm",children:[s.jsxs(t,{className:"flex justify-between items-center mb-4",children:[s.jsxs(a,{variant:"h6",className:"font-josefin ",children:[r("cart.items")," (",n.length,")"]}),n.length>0&&s.jsx(E,{variant:"text",color:"error",className:"rounded-none",onClick:S,startIcon:s.jsx(w,{className:"w-4 h-4"}),children:r("cart.clearCart")})]}),s.jsx(b,{className:"mb-4"}),y?s.jsx(t,{className:"text-center py-8",children:s.jsx(a,{children:r("common.loading")})}):s.jsx(t,{children:n&&n.length>0&&n.map(e=>s.jsxs(t,{className:"flex flex-col sm:flex-row items-start sm:items-center py-4 border-b border-gray-200",children:[s.jsx(R,{className:"w-full sm:w-24 h-24 mr-4 flex-shrink-0 overflow-hidden",children:s.jsx(H,{component:"img",image:I(e.image,e.product),alt:e.name,className:"w-full h-full object-cover"})}),s.jsxs(t,{className:"flex-grow mt-2 sm:mt-0",children:[s.jsx(U,{component:h,to:`/products/${e.product}`,className:"font-medium hover:text-girl-secondary",underline:"hover",children:e.name}),e.variant&&s.jsx(a,{variant:"body2",className:"text-gray-600",children:e.variant})]}),s.jsxs(t,{className:"flex items-center mt-2 sm:mt-0 mr-4",children:[s.jsx(g,{size:"small",onClick:()=>m(e.id,e.quantity-1),disabled:e.quantity<=1,children:s.jsx(Z,{className:"w-4 h-4"})}),s.jsx(z,{value:e.quantity,onChange:c=>m(e.id,parseInt(c.target.value)||1),inputProps:{min:1,style:{textAlign:"center",width:"40px"}},variant:"standard",className:"mx-2"}),s.jsx(g,{size:"small",onClick:()=>m(e.id,e.quantity+1),disabled:e.quantity>=e.countInStock,children:s.jsx(J,{className:"w-4 h-4"})})]}),s.jsxs(t,{className:"flex items-center justify-between w-full sm:w-auto mt-2 sm:mt-0",children:[s.jsxs(a,{variant:"body1",className:"font-medium mr-4",children:["DA ",(e.price*e.quantity).toFixed(2)]}),s.jsx(g,{color:"error",onClick:()=>$(e.id),children:s.jsx(w,{className:"w-5 h-5"})})]})]},e.id))}),s.jsx(t,{className:"mt-6",children:s.jsxs(h,{to:"/products",className:p("text-girl-secondary flex items-center gap-2","border-1 border-solid border-girl-secondary","w-fit px-3 py-2 hover:bg-girl-secondary hover:text-girl-white"),children:[s.jsx(v,{className:"w-5 h-5"}),s.jsx("p",{children:r("cart.continueShopping")})]})})]})}),s.jsxs(u,{item:!0,xs:12,md:4,children:[s.jsxs(j,{className:"p-4 rounded-none shadow-sm",children:[s.jsx(a,{variant:"h6",className:"mb-4",children:r("cart.orderSummary")}),s.jsxs(t,{className:"space-y-3",children:[s.jsxs(t,{className:"flex justify-between",children:[s.jsx(a,{variant:"body1",children:r("cart.subtotal")}),s.jsxs(a,{variant:"body1",children:["DA ",o.toFixed(2)]})]}),s.jsxs(t,{className:"flex justify-between",children:[s.jsx(a,{variant:"body1",children:r("cart.shipping")}),s.jsx(a,{variant:"body1",children:x===0?r("cart.free"):`DA ${x.toFixed(2)}`})]}),s.jsx(b,{}),s.jsxs(t,{className:"flex justify-between font-bold",children:[s.jsx(a,{variant:"body1",children:r("cart.total")}),s.jsxs(a,{variant:"body1",children:["DA ",F.toFixed(2)]})]})]}),s.jsxs(t,{className:"mt-6",children:[s.jsx("button",{onClick:A,disabled:n.length===0,className:p("text-girl-secondary flex items-center gap-2 justify-center","border-1 border-solid border-girl-secondary items-center","w-full px-3 py-2 bg-girl-secondary text-girl-white","hover:bg-girl-primary"),children:s.jsx("p",{children:r("cart.proceedToCheckout")})}),s.jsx(t,{className:"mt-4 text-center",children:s.jsx(a,{variant:"body2",className:"text-gray-600",children:r("cart.secureCheckout")})})]})]}),s.jsxs(j,{className:"p-4 mt-4 rounded-none shadow-sm",children:[s.jsx(a,{variant:"subtitle2",className:"mb-2",children:r("cart.shippingPolicy")}),s.jsx(a,{variant:"body2",className:"text-gray-600",children:r("cart.freeShippingMessage")})]})]})]})})]})};export{as as default};
