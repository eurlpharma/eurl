import{bj as l,bm as f,aJ as m,aI as O,bn as C,bo as h,aL as S,bl as _}from"./index-d1e9d783.js";const j={orders:[],order:null,loading:!1,error:null,success:!1,totalOrders:0},c=l("orders/create",async(s,{rejectWithValue:e})=>{var r,d;try{return await f(s)}catch(a){const o=((d=(r=a.response)==null?void 0:r.data)==null?void 0:d.message)||a.message||"Failed to create order";return e(o)}}),t=l("orders/details",async(s,{rejectWithValue:e})=>{var r,d;try{return await m(s)}catch(a){const o=((d=(r=a.response)==null?void 0:r.data)==null?void 0:d.message)||a.message||"Failed to fetch order details";return e(o)}}),i=l("orders/pay",async({id:s,paymentResult:e},{rejectWithValue:r})=>{var d,a;try{return await O(s,e)}catch(o){const n=((a=(d=o.response)==null?void 0:d.data)==null?void 0:a.message)||o.message||"Payment failed";return r(n)}}),u=l("orders/userOrders",async({page:s=1,limit:e=10},{rejectWithValue:r})=>{var d,a;try{return await C(s,e)}catch(o){const n=((a=(d=o.response)==null?void 0:d.data)==null?void 0:a.message)||o.message||"Failed to fetch orders";return r(n)}}),g=l("orders/cancel",async(s,{rejectWithValue:e})=>{var r,d;try{return await h(s)}catch(a){const o=((d=(r=a.response)==null?void 0:r.data)==null?void 0:d.message)||a.message||"Failed to cancel order";return e(o)}}),p=l("orders/updateStatus",async({id:s,statusData:e},{rejectWithValue:r})=>{var d,a;try{return await S(s,e)}catch(o){const n=((a=(d=o.response)==null?void 0:d.data)==null?void 0:a.message)||o.message||"Failed to update order status";return r(n)}}),y=_({name:"orders",initialState:j,reducers:{clearOrderErrors:s=>{s.error=null},resetOrderSuccess:s=>{s.success=!1},clearOrderDetails:s=>{s.order=null},setOrders:(s,e)=>{s.orders=e.payload}},extraReducers:s=>{s.addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,r)=>{e.loading=!1,e.success=!0,e.order=r.payload}).addCase(c.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(t.pending,e=>{e.loading=!0,e.error=null}).addCase(t.fulfilled,(e,r)=>{e.loading=!1,e.order=r.payload}).addCase(t.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,r)=>{e.loading=!1,e.order=r.payload}).addCase(i.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,(e,r)=>{e.loading=!1,e.orders=r.payload.orders,e.totalOrders=r.payload.total,e.page=r.payload.page,e.pages=r.payload.pages}).addCase(u.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(g.pending,e=>{e.loading=!0,e.error=null}).addCase(g.fulfilled,(e,r)=>{e.loading=!1,e.order&&(e.order=r.payload);const d=e.orders.findIndex(a=>a._id===r.payload._id);d!==-1&&(e.orders[d]=r.payload),e.order&&e.order._id===r.payload._id&&(e.order=r.payload)}).addCase(g.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(p.pending,e=>{e.loading=!0,e.error=null}).addCase(p.fulfilled,(e,r)=>{e.loading=!1;const d=e.orders.findIndex(a=>a._id===r.payload._id);d!==-1&&(e.orders[d]=r.payload),e.order&&e.order._id===r.payload._id&&(e.order=r.payload)}).addCase(p.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),{clearOrderErrors:x,resetOrderSuccess:b,clearOrderDetails:F,setOrders:$}=y.actions,I=y.reducer;export{g as cancelOrder,F as clearOrderDetails,x as clearOrderErrors,c as createOrder,I as default,t as getOrderDetails,u as getUserOrders,i as payOrder,b as resetOrderSuccess,$ as setOrders,p as updateOrderStatus};
